---
import Layout from '../layouts/Layout.astro';
import { siteData } from '../data/siteData';

// 1. HIGH-LEVEL OVERVIEW (Used for the top routing cards)
const capabilityLayers = [
  {
    id: 'analytical-chemistry',
    title: 'Analytical Chemistry',
    summary: 'Verification of product specifications, identity, and purity for raw materials and finished goods.',
    icon: 'ri-test-tube-line',
  },
  {
    id: 'microbiology-programs',
    title: 'Microbiology Programs',
    summary: 'Testing protocols designed to ensure product safety, microbiological stability, and facility hygiene.',
    icon: 'ri-bug-line',
  },
  {
    id: 'stability-testing',
    title: 'Stability Testing',
    summary: 'Data-driven shelf life studies to ensure product integrity remains intact from warehouse to consumer.',
    icon: 'ri-timer-line',
  },
  {
    id: 'method-development',
    title: 'Method Development',
    summary: 'Custom analytical protocols built for your specific matrix and regulatory pathway.',
    icon: 'ri-flask-line',
  }
];

// 2. THE TRUE DEEP DIVE (Structured for scannable, technical spec grids)
const technicalSpecs = [
  {
    id: 'analytical-chemistry',
    title: 'Analytical Chemistry',
    description: 'Quantitative and qualitative analysis utilizing compendial methods to ensure raw materials and final products meet strict regulatory specifications.',
    tests: [
      { name: 'Active Ingredient Assay', method: 'HPLC / UPLC / UV-Vis', application: 'Label claim verification and potency tracking.' },
      { name: 'Residual Solvents', method: 'GC-MS / USP <467>', application: 'Screening for Class 1, 2, and 3 manufacturing solvents.' },
      { name: 'Heavy Metals & Elementals', method: 'ICP-MS / USP <232>/<233>', application: 'Trace level detection of Pb, As, Cd, Hg, and others.' },
      { name: 'Material Identification', method: 'FTIR / Wet Chemistry', application: 'Authenticity testing for incoming raw material release.' },
      { name: 'Compositional Profiling', method: 'Protein Analyzer / Titration', application: 'Nutritional labeling and macro-component consistency.' }
    ]
  },
  {
    id: 'microbiology-programs',
    title: 'Microbiology Programs',
    description: 'Risk-based microbiology testing designed to protect consumer health and validate the hygiene of your manufacturing environment.',
    tests: [
      { name: 'Microbial Enumeration', method: 'USP <61> / BAM', application: 'Total Aerobic Microbial Count (TAMC) and TYMC.' },
      { name: 'Specified Pathogens', method: 'USP <62>', application: 'Absence testing for S. aureus, Salmonella, E. coli, P. aeruginosa.' },
      { name: 'Antimicrobial Effectiveness', method: 'USP <51> (AET)', application: 'Preservative challenge testing for multi-dose formulations.' },
      { name: 'Environmental Monitoring', method: 'Air / Surface Plates', application: 'Facility hygiene and cleanroom compliance testing.' },
      { name: 'Water Suitability', method: 'Membrane Filtration', application: 'Verification of process water systems and TOC limits.' }
    ]
  },
  {
    id: 'stability-testing',
    title: 'Stability Testing',
    description: 'Comprehensive lifecycle management to establish and defend product expiration dates under various climatic conditions.',
    tests: [
      { name: 'Accelerated Aging', method: '40°C / 75% RH', application: 'Rapid degradation assessment for early shelf-life estimates.' },
      { name: 'Real-Time Storage', method: '25°C / 60% RH', application: 'Long-term baseline stability required for final regulatory filing.' },
      { name: 'Photostability', method: 'ICH Q1B Options 1 & 2', application: 'Stress testing against UV and visible light exposure.' },
      { name: 'Forced Degradation', method: 'Acid / Base / Heat / Oxidative', application: 'Identifying degradation pathways and stability-indicating markers.' }
    ]
  },
  {
    id: 'method-development',
    title: 'Method Development & Transfer',
    description: 'Translating complex analytical challenges into robust, validated, and transfer-ready standard operating procedures.',
    tests: [
      { name: 'Matrix Optimization', method: 'Extraction & Recovery', application: 'Modifying compendial methods for complex or novel formulations.' },
      { name: 'Formal Validation', method: 'USP <1225> / ICH Q2', application: 'Validating accuracy, precision, specificity, and linearity.' },
      { name: 'Technology Transfer', method: 'Comparative Testing', application: 'Seamlessly moving methods from R&D to QA manufacturing labs.' },
      { name: 'Failure Investigation', method: 'Root Cause Analysis', application: 'OOS (Out of Specification) investigations and troubleshooting.' }
    ]
  }
];

const instrumentRegistry = [
  { category: "Chromatography", tools: ["UPLC / HPLC (PDA, RI, ELSD)", "Ion Chromatography (IC)", "Gas Chromatography (GC / FID)"] },
  { category: "Mass Spectrometry", tools: ["LC-MS (Liquid / Mass Spec)", "GC-MS (Gas / Mass Spec)", "ICP-MS (Inductively Coupled Plasma)"] },
  { category: "Spectroscopy", tools: ["FTIR (Fourier Transform Infrared)", "UV-Vis Spectrophotometry"] },
  { category: "Specialized Analysis", tools: ["Protein Analyzer (Kjeldahl/Dumas)", "Stability Chambers (Zone I-IV)", "Class II Biosafety Enclosures"] }
];
---

<Layout
  title={`Capabilities - ${siteData.name}`}
  description="Comprehensive analytical testing outcomes including purity, label claim verification, and full instrument registry."
>
  <section class="home-hero">
    <div class="home-shell">
      <nav class="breadcrumb" aria-label="Breadcrumb">
        <a href="/">Home</a>
        <span aria-hidden="true">&gt;</span>
        <span class="text-emerald-400 opacity-80">Capabilities</span>
      </nav>

      <div class="hero-grid mb-16">
        <div class="hero-copy">
          <p class="hero-eyebrow">Service Capabilities</p>
          <h1>Outcome-driven testing for regulated programs.</h1>
          <p class="hero-lead">
            From raw material verification to complete stability lifecycle management, we provide the defensible analytical data required to confidently bring your products to market.
          </p>
        </div>

        <div class="hero-media-frame">
          <img src="https://images.unsplash.com/photo-1581093588401-fbb62a02f120?w=800&q=80" alt="High Performance Liquid Chromatography (HPLC) instrumentation at BioChroma Labs" loading="eager" />
          <div class="hero-media-caption">
            <p>Analytical Precision</p>
            <span>Traceable, compendial methodologies.</span>
          </div>
        </div>
      </div>

      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
        {capabilityLayers.map((capability) => (
          <a href={`#${capability.id}`} class="group bg-white/5 border border-white/10 p-6 rounded-xl hover:bg-emerald-500/5 hover:border-emerald-400/30 transition-all duration-300">
            <div class="flex items-center gap-4 mb-4">
              <span class="flex items-center justify-center w-10 h-10 rounded-lg bg-emerald-500/10 text-emerald-400 text-lg">
                <i class={capability.icon}></i>
              </span>
              <h2 class="text-white font-bold text-lg group-hover:text-emerald-400 transition-colors">{capability.title}</h2>
            </div>
            <p class="text-slate-400 text-sm leading-relaxed mb-4">{capability.summary}</p>
            <span class="text-emerald-400 text-sm font-semibold flex items-center gap-1 opacity-80 group-hover:opacity-100 group-hover:translate-x-1 transition-all">
              View Specs <i class="ri-arrow-down-line"></i>
            </span>
          </a>
        ))}
      </div>
    </div>
  </section>

  <section class="home-section bg-slate-900/50 border-t border-white/5">
    <div class="home-shell">
      <div class="section-heading">
        <p>Testing Methodologies</p>
        <h2>Detailed Analytical Specifications</h2>
      </div>

      <div class="flex flex-col gap-24 mt-12">
        {technicalSpecs.map((spec) => (
          <div id={spec.id} class="scroll-mt-32">
            <div class="mb-8 max-w-3xl">
              <h3 class="text-2xl md:text-3xl font-bold text-white mb-4">{spec.title}</h3>
              <p class="text-slate-300 text-lg leading-relaxed">{spec.description}</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
              {spec.tests.map((test) => (
                <div class="bg-white/5 border border-white/10 rounded-lg p-5 hover:border-emerald-400/20 transition-colors">
                  <h4 class="text-white font-bold mb-2">{test.name}</h4>
                  <div class="flex flex-col gap-2 text-sm">
                    <div class="flex items-start gap-2">
                      <span class="text-emerald-400 font-semibold min-w-[70px]">Method:</span>
                      <span class="text-slate-300">{test.method}</span>
                    </div>
                    <div class="flex items-start gap-2">
                      <span class="text-emerald-400 font-semibold min-w-[70px]">App:</span>
                      <span class="text-slate-400">{test.application}</span>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <section class="home-section instrument-registry-section bg-white/5 border-t border-white/10">
    <div class="home-shell">
      <div class="section-heading">
        <p>Infrastructure</p>
        <h2>Full Analytical Instrumentation Registry</h2>
      </div>

      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8 mt-12">
        {instrumentRegistry.map(item => (
          <div>
            <h4 class="text-emerald-400 text-sm font-bold uppercase tracking-wider border-b border-emerald-400/20 pb-2 mb-4">
              {item.category}
            </h4>
            <ul class="flex flex-col gap-3">
              {item.tools.map(tool => (
                <li class="text-slate-300 text-sm flex items-start gap-2">
                  <i class="ri-checkbox-blank-circle-fill text-[8px] mt-1.5 text-white/20"></i>
                  {tool}
                </li>
              ))}
            </ul>
          </div>
        ))}
      </div>
    </div>
  </section>
</Layout>