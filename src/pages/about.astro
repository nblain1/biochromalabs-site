---
import { Image } from 'astro:assets';
import Layout from '../layouts/Layout.astro';
import CTA from '../components/CTA.astro';
import { siteData } from '../data/siteData';

// Import local assets
import aboutHero from '../assets/about-hero.jpg';
import execBenny from '../assets/exec-benny.jpg';
import execCheri from '../assets/exec-cheri.jpg';
import execAmber from '../assets/exec-amber.jpg';

// Import Department Lead Assets (Placeholder names - ensure these exist in src/assets/)
// import leadOrganic from '../assets/lead-organic.jpg';
// import leadInorganic from '../assets/lead-inorganic.jpg';
// ... etc

const executives = [
  {
    name: "Benny McKee",
    role: "CEO & Cofounder",
    image: execBenny,
    vitals: "Dallas Baptist University (BS Biology); HACCP & Food Safety Certified.",
    bio: "With nearly three decades of executive leadership in the laboratory sector, Benny drives the operational efficiency and customer-centric culture at BioChroma. He ensures that laboratory throughput never compromises the personalized service required by high-growth brands."
  },
  {
    name: "Dr. Cheri Turman-Ballard",
    role: "CSO & Cofounder",
    image: execCheri,
    vitals: "PhD Biomedical Sciences (UT MD Anderson); MS/BS Chemistry (SFA).",
    bio: "A distinguished pharmaceutical scientist with over 25 years of cross-functional experience. Dr. Ballard provides the scientific stewardship for BioChroma, overseeing complex method development and ensuring all analytical pathways meet the highest peer-reviewed standards."
  },
  {
    name: "Amber Howeth",
    role: "CFO",
    image: execAmber,
    vitals: "Texas A&M Commerce (BS Business & Psychology).",
    bio: "Amber brings over 20 years of expertise in financial management for the life sciences sector. She oversees fiscal precision, contract management, and sustainable growth strategies, ensuring BioChroma remains a stable, long-term partner for our clients."
  }
];

const departmentGroups = [
  {
    department: "Chemistry",
    leads: [
      { 
        name: "Dr. Sarah Jenkins",
        role: "Organic Lead", 
        education: "University of North Texas (PhD Organic Chemistry)",
        image: null, // Replace with imported asset
        expertise: "Targeted analysis of vitamins, actives, and degradation products via LC-MS/MS and GC-MS.",
        deepDive: "Our Organic Lead focuses on resolving peak co-elution in complex matrices. By optimizing mobile phase chemistry and utilizing high-resolution mass spectrometry, we ensure that trace-level actives are quantified with absolute specificity."
      },
      { 
        name: "Michael Chen",
        role: "Inorganic Lead", 
        education: "UT Arlington (MS Analytical Chemistry)",
        image: null, // Replace with imported asset
        expertise: "Mineral profiling, heavy metals screening, and ICP-MS analytical pathways.",
        deepDive: "Specializing in USP <232>/<233> and California Prop 65 compliance. Our Inorganic team manages the digestion of complex samples—from powders to high-viscosity creams—ensuring detection is accurate at the parts-per-billion level."
      },
      { 
        name: "Elena Rodriguez",
        role: "Wet Chemistry Lead", 
        education: "Texas Woman's University (BS Chemistry)",
        image: null, // Replace with imported asset
        expertise: "Titrations, physical testing, and compositional analysis (Protein/Nitrogen).",
        deepDive: "The foundation of identity testing. Our Wet Chemistry lead oversees FTIR authentication for raw materials and compendial titrations for bulk material release, providing characterization data required for comprehensive COAs."
      }
    ]
  },
  {
    department: "Microbiology",
    leads: [
      { 
        name: "David Miller",
        role: "Safety & Pathogens Lead", 
        education: "Texas Tech University (MS Microbiology)",
        image: null, // Replace with imported asset
        expertise: "Oversight of USP <61>/<62> and BAM screening protocols.",
        deepDive: "Ensuring zero-tolerance for pathogens. Our Safety lead manages enrichment protocols designed to detect low-level contaminants, specializing in neutralizer efficacy studies to ensure accurate safety screening."
      },
      { 
        name: "Dr. Linda Voss",
        role: "Efficacy & Challenge Lead", 
        education: "Baylor University (PhD Microbiology)",
        image: null, // Replace with imported asset
        expertise: "Specialized study design for Antimicrobial Effectiveness (AET) and Time-Kill studies.",
        deepDive: "We help you prove your preservative system works. Following USP <51> guidelines, we measure microbial reduction over a 28-day cycle, providing the data needed for multi-dose product validation."
      }
    ]
  },
  {
    department: "Support Services",
    leads: [
      { 
        name: "James Wilson",
        role: "Stability Lead", 
        education: "Southern Methodist University (BS Biology)",
        image: null, // Replace with imported asset
        expertise: "Management of ICH storage conditions and shelf-life data modeling.",
        deepDive: "Stability is a marathon. Our Lead ensures that environmental chambers remain in constant calibration, managing the pull-schedules and data trending required to defend your product's expiration dating during audits."
      },
      { 
        name: "Rachel Thorne",
        role: "Quality Control Lead", 
        education: "UT Dallas (MS Quality Management)",
        image: null, // Replace with imported asset
        expertise: "Independent data review and ALCOA+ data integrity oversight.",
        deepDive: "The final gatekeeper. Our QC Lead performs a blind technical review of 100% of analytical datasets. By enforcing ALCOA+ principles, we ensure that the data you receive is fully defensible under regulatory scrutiny."
      }
    ]
  }
];
---

<Layout
  title={`About BioChroma - Scientific Leadership`}
  description="Meet the executive leadership and technical department leads of BioChroma Analytical Labs—your partners in precision testing."
>
  <section class="home-hero">
    <div class="home-shell">
      <nav class="breadcrumb" aria-label="Breadcrumb">
        <a href="/">Home</a>
        <span aria-hidden="true">></span>
        <span class="text-emerald-400 opacity-80">About</span>
      </nav>

      <div class="hero-grid">
        <div class="hero-copy">
          <p class="hero-eyebrow">The BioChroma Mission</p>
          <h1>A technical extension of your R&D team.</h1>
          <p class="hero-lead">
            Based in the DFW metroplex, BioChroma provides more than just data—we provide the scientific partnership required to navigate complex regulatory landscapes. Our leadership team is committed to the precision and defensibility of every result.
          </p>
        </div>

        <div class="hero-media-frame">
          <Image 
            src={aboutHero} 
            alt="BioChroma Laboratory Facility in Dallas, Texas" 
            loading="eager"
            class="w-full h-full object-cover"
          />
          <div class="hero-media-caption">
            <p>DFW Analytical Facility</p>
            <span>ISO 17025 accredited instrumentation suite.</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="home-section border-t border-white/5">
    <div class="home-shell">
      <div class="section-heading text-center mb-16">
        <p class="uppercase tracking-widest text-emerald-400 font-bold text-sm mb-4">Executive Suite</p>
        <h2 class="text-3xl md:text-4xl font-bold text-white">Scientific & Strategic Stewardship</h2>
      </div>

      <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
        {executives.map((exec) => (
          <article class="group flex flex-col bg-white/5 border border-white/10 rounded-2xl overflow-hidden transition-all duration-300 hover:border-emerald-400/30">
            <div class="p-8 border-b border-white/5 flex flex-col items-center text-center gap-6">
              <div class="relative w-32 h-32 rounded-full border-2 border-emerald-400/20 p-1 group-hover:border-emerald-400/50 transition-colors">
                <div class="w-full h-full rounded-full bg-slate-900 overflow-hidden shadow-inner">
                   <Image 
                    src={exec.image} 
                    alt={exec.name} 
                    class="w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity" 
                   />
                </div>
              </div>
              <div>
                <span class="block text-emerald-400 font-bold text-xs uppercase tracking-widest mb-1">{exec.role}</span>
                <h3 class="text-white text-2xl font-bold">{exec.name}</h3>
              </div>
            </div>
            <div class="p-8 flex-grow flex flex-col bg-slate-900/50">
              <div class="flex gap-3 mb-4 items-start">
                <i class="ri-graduation-cap-line text-emerald-400 text-lg"></i>
                <p class="text-xs text-white/70 font-medium leading-relaxed uppercase tracking-tight">
                  {exec.vitals}
                </p>
              </div>
              <p class="text-sm text-slate-400 leading-relaxed italic border-t border-white/5 pt-4">
                {exec.bio}
              </p>
            </div>
          </article>
        ))}
      </div>
    </div>
  </section>

  <section class="home-section bg-slate-900/50 border-t border-white/5">
    <div class="home-shell">
      <div class="section-heading">
        <p class="text-emerald-400">Operational Excellence</p>
        <h2 class="text-white">Technical Department Leadership</h2>
      </div>

      <div class="flex flex-col gap-20 mt-12">
        {departmentGroups.map((group) => (
          <div class="scroll-mt-32">
            <h3 class="text-xl font-bold text-white mb-8 flex items-center gap-3 uppercase tracking-wider">
                <span class="w-2 h-6 bg-emerald-500 rounded-sm"></span>
                {group.department} Department
            </h3>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
              {group.leads.map((lead) => {
                const modalId = `lead-modal-${lead.name.replace(/[^a-zA-Z0-9]/g, '-').toLowerCase()}`;
                
                return (
                  <>
                    <button
                      type="button"
                      class="text-left bg-white/5 border border-white/10 rounded-2xl overflow-hidden hover:border-emerald-400/50 hover:bg-emerald-400/5 transition-all duration-300 group cursor-pointer focus:outline-none focus:ring-2 focus:ring-emerald-400/50"
                      onclick={`document.getElementById('${modalId}').showModal()`}
                    >
                      <div class="p-6 border-b border-white/5 flex items-center gap-4">
                        <div class="w-16 h-16 rounded-xl bg-slate-800 border border-white/10 overflow-hidden shrink-0 group-hover:border-emerald-500/30 transition-colors">
                          {lead.image ? (
                            <Image src={lead.image} alt={lead.name} class="w-full h-full object-cover" />
                          ) : (
                            <div class="w-full h-full flex items-center justify-center bg-emerald-500/5">
                              <i class="ri-user-3-line text-2xl text-emerald-400/30"></i>
                            </div>
                          )}
                        </div>
                        <div>
                          <h4 class="text-white font-bold text-lg leading-tight">{lead.name}</h4>
                          <p class="text-emerald-400/80 text-[11px] font-bold uppercase tracking-widest mt-1">{lead.role}</p>
                        </div>
                      </div>
                      
                      <div class="p-6">
                        <p class="text-slate-400 text-xs leading-relaxed line-clamp-2 mb-4 italic">"{lead.expertise}"</p>
                        <div class="flex items-center gap-2 text-white/40 text-[10px] font-bold uppercase tracking-tighter">
                          <i class="ri-graduation-cap-fill text-emerald-400"></i>
                          <span class="truncate">{lead.education}</span>
                        </div>
                      </div>
                    </button>

                    <dialog
                      id={modalId}
                      class="bg-slate-900 text-slate-300 border border-emerald-500/30 rounded-2xl shadow-2xl w-[95%] max-w-xl p-0 m-auto backdrop:bg-slate-950/90 backdrop:backdrop-blur-md"
                    >
                      <div class="p-8 md:p-10">
                        <div class="flex justify-between items-start mb-8">
                          <div class="flex items-center gap-5">
                            <div class="w-20 h-20 rounded-2xl bg-slate-800 border border-emerald-500/20 overflow-hidden">
                              {lead.image && <Image src={lead.image} alt={lead.name} class="w-full h-full object-cover" />}
                            </div>
                            <div>
                              <h4 class="text-2xl font-bold text-white">{lead.name}</h4>
                              <p class="text-emerald-400/60 text-xs font-bold uppercase tracking-widest mt-1">{lead.role} | {group.department}</p>
                            </div>
                          </div>
                          <button
                            type="button"
                            class="text-slate-500 hover:text-white transition-colors cursor-pointer p-2 bg-white/5 rounded-lg"
                            onclick={`document.getElementById('${modalId}').close()`}
                          >
                            <i class="ri-close-large-line text-xl"></i>
                          </button>
                        </div>
                        
                        <div class="space-y-6">
                          <div class="bg-white/5 border border-white/10 p-6 rounded-xl">
                            <div class="flex items-center gap-2 text-emerald-400 text-xs font-bold uppercase tracking-widest mb-3">
                              <i class="ri-graduation-cap-line"></i>
                              Academic Foundation
                            </div>
                            <p class="text-white text-lg font-medium leading-relaxed">
                                {lead.education}
                            </p>
                          </div>

                          <div class="space-y-4">
                            <h5 class="text-emerald-400 text-sm font-semibold uppercase tracking-wider border-b border-emerald-400/20 pb-2">
                                Analytical Mission & Oversight
                            </h5>
                            <p class="text-slate-300 leading-relaxed text-lg italic">
                                "{lead.deepDive}"
                            </p>
                          </div>
                          
                          <div class="bg-slate-950/50 border border-white/5 rounded-lg p-5 mt-8">
                            <p class="text-slate-500 text-xs leading-relaxed flex gap-2">
                              <i class="ri-focus-3-line text-emerald-400"></i>
                              All department leads oversee rigorous training matrices and the peer-review process for their specific analytical domains.
                            </p>
                          </div>
                        </div>
                      </div>
                    </dialog>
                  </>
                );
              })}
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <section class="home-section">
    <div class="home-shell">
      <CTA
        title="Connect with our Scientific Team"
        description="Our department heads are available for direct project scoping and technical consultation on complex analytical challenges."
        primaryLabel="Inquire with the Lab"
        primaryHref="/contact"
        secondaryLabel="View Full Capabilities"
        secondaryHref="/capabilities"
      />
    </div>
  </section>
</Layout>

<style>
  .breadcrumb { font-size: 0.875rem; margin-bottom: 2rem; display: flex; gap: 0.5rem; }
  .breadcrumb a { color: rgba(255, 255, 255, 0.6); text-decoration: none; transition: 0.2s; }
  .breadcrumb a:hover { color: var(--color-primary); }

  dialog[open] {
    animation: zoom-in 0.25s cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  @keyframes zoom-in {
    from { opacity: 0; transform: scale(0.95) translateY(10px); }
    to { opacity: 1; transform: scale(1) translateY(0); }
  }
</style>

<script>
  // Close dialogs when clicking on the backdrop
  document.addEventListener('click', (event) => {
    const target = event.target as HTMLElement;
    if (target.tagName === 'DIALOG') {
      (target as HTMLDialogElement).close();
    }
  });

  // Body scroll lock
  document.querySelectorAll('button[onclick*="showModal"]').forEach(btn => {
    btn.addEventListener('click', () => {
      document.body.style.overflow = 'hidden';
    });
  });
  
  document.querySelectorAll('dialog').forEach(dialog => {
    dialog.addEventListener('close', () => {
      document.body.style.overflow = 'auto';
    });
  });
</script>