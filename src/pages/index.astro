---
import Layout from '../layouts/Layout.astro';
import CTA from '../components/CTA.astro';
import {
  siteData,
  capabilityHighlights,
  industries,
  processSteps,
  testimonials,
  faqs,
} from '../data/siteData';

const heroHighlights = [
  {
    title: 'ISO 17025 quality alignment',
    detail: 'Method controls and verification checkpoints built into every program.',
    icon: 'ri-shield-check-line',
  },
  {
    title: 'Compendial method coverage',
    detail: 'Validated USP and related methods for chemistry and microbiology workflows.',
    icon: 'ri-flask-line',
  },
  {
    title: 'End-to-end support',
    detail: 'From feasibility through launch with clear documentation and communication.',
    icon: 'ri-route-line',
  },
];

const capabilityAnchorMap: Record<string, string> = {
  'Operational Safety & Pathogen Screening': 'microbiology-programs',
  'Identity & Label Claim Verification': 'analytical-chemistry',
  'Data-Driven Shelf Life Studies': 'stability-testing',
  'Functional Performance Validation': 'method-development',
  'Strategic Quality Planning': 'method-development',
  'Concept-to-Market Commercialization': 'method-development',
};
---

<Layout title={`${siteData.name} - ${siteData.tagline}`} description={siteData.description}>
  <section class="home-hero">
  <div class="home-shell">
    <div class="hero-grid">
      <div class="hero-copy">
        <p class="hero-eyebrow">ISO/IEC 17025-aligned laboratory systems</p>
        <h1>Precision analytical testing for regulated product development.</h1>
        <p class="hero-lead">
          Based in the DFW metroplex, BioChroma provides chemistry, microbiology, and stability testing. We deliver the defensible data required to move cosmetics, supplements, and OTC products from R&D to market.
        </p>
        <div class="hero-cta-row">
          <a class="btn-primary" href="/contact">Request a quote <i class="ri-arrow-right-up-line"></i></a>
          <a class="btn-secondary" href="/capabilities">View capabilities <i class="ri-arrow-right-line"></i></a>
        </div>
      </div>

      <aside class="hero-media-frame" aria-label="Laboratory Facility">
        <img
          src="/images/hero-lab.jpg" 
          alt="BioChroma Analytical testing equipment"
          loading="eager"
        />
        <div class="hero-media-caption">
          <p>Analytical Excellence</p>
          <span>Compendial testing and custom method development.</span>
        </div>
      </aside>
    </div>
    
    </div>
</section>

<section class="home-section capabilities-section">
  <div class="home-shell">
    <div class="section-heading">
      <p>Capabilities</p>
      <h2>Six capability areas supporting quality from concept to scale.</h2>
    </div>

    <div class="capability-grid">
      {capabilityHighlights.map((capability) => (
        <a href={`/capabilities#${capabilityAnchorMap[capability.title] ?? 'analytical-chemistry'}`} class="capability-card">
          <div class="capability-head">
            <span class="capability-icon"><i class={capability.icon}></i></span>
            </div>
          <h3>{capability.title}</h3>
          <p>{capability.description}</p>
          <ul class="capability-pills">
            {capability.bullets.map((bullet) => (
              <li>{bullet}</li>
            ))}
          </ul>
          <div class="card-footer">
            <span>Learn More</span>
            <i class="ri-arrow-right-line"></i>
          </div>
        </a>
      ))}
    </div>
  </div>
</section>

<style>
  /* Uniform Grid Fix */
  .capability-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 2rem;
    margin-top: 3rem;
  }

  /* Standardized Card Styling */
  .capability-card {
    background: rgba(255, 255, 255, 0.02);
    border: 1px solid rgba(255, 255, 255, 0.05);
    padding: 2.5rem;
    border-radius: 12px;
    text-decoration: none; /* Make whole card clickable */
    color: inherit;
    display: flex;
    flex-direction: column;
    transition: all 0.3s ease;
  }

  /* Hover Effects */
  .capability-card:hover {
    transform: translateY(-5px);
    border-color: rgba(0, 230, 168, 0.3);
    background: rgba(0, 230, 168, 0.02);
    box-shadow: 0 10px 30px -10px rgba(0, 230, 168, 0.15);
  }

  /* Centered Pill Text Fix */
  .capability-pills {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    list-style: none;
    padding: 0;
    margin: 1.5rem 0;
  }

  .capability-pills li {
    background: rgba(255, 255, 255, 0.05);
    padding: 0.4rem 0.8rem; /* Adjusted for centering */
    border-radius: 999px;
    font-size: 0.825rem;
    display: flex;
    align-items: center; /* Vertical Center Fix */
    justify-content: center;
    line-height: 1;
    color: var(--teal);
  }

  /* Visual Cue for Clickability */
  .card-footer {
    margin-top: auto;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--teal);
    opacity: 0;
    transform: translateX(-10px);
    transition: all 0.3s ease;
  }

  .capability-card:hover .card-footer {
    opacity: 1;
    transform: translateX(0);
  }
</style>

  <section class="home-section support-section">
    <div class="home-shell support-layout">
      <div class="section-heading">
        <p>Who we support</p>
        <h2>Programs tuned to the teams that move regulated science forward.</h2>
      </div>
      <div class="support-pills">
        {industries.map((industry, index) => (
          <a href="/capabilities" class={`support-pill ${index % 2 === 0 ? 'support-pill-alt' : ''}`}>
            <span>{industry}</span>
            <i class="ri-arrow-right-up-line"></i>
          </a>
        ))}
      </div>
    </div>
  </section>

  <section class="home-section process-section">
    <div class="home-shell">
      <div class="section-heading section-heading-center">
        <p>Process</p>
        <h2>From discovery to launch with clear stage gates and transparent reporting.</h2>
      </div>

      <div class="process-timeline">
        {processSteps.map((step, index) => (
          <article class={`process-item ${index % 2 === 0 ? 'process-left' : 'process-right'}`}>
            <div class="process-marker" aria-hidden="true">
              <span>{index + 1}</span>
            </div>
            <div class="process-content">
              <h3>{step.title}</h3>
              <p>{step.description}</p>
            </div>
          </article>
        ))}
      </div>
    </div>
  </section>

  <section class="home-section testimonials-section">
    <div class="home-shell">
      <div class="section-heading">
        <p>Client feedback</p>
        <h2>Trusted by quality and regulatory leaders.</h2>
      </div>
      <div class="testimonial-row">
        {testimonials.map((item) => (
          <article class="testimonial-card">
            <p>“{item.content}”</p>
            <div>
              <h3>{item.name}</h3>
              <span>{item.role}</span>
            </div>
          </article>
        ))}
      </div>
    </div>
  </section>

  <section class="home-section faq-section">
    <div class="home-shell faq-layout">
      <div class="section-heading">
        <p>FAQ</p>
        <h2>Quick answers about BioChroma Analytical Labs.</h2>
      </div>

      <div class="faq-stack">
        {faqs.map((item) => (
          <details class="faq-item">
            <summary>
              <span>{item.question}</span>
              <i class="ri-add-line"></i>
            </summary>
            <p>{item.answer}</p>
          </details>
        ))}
      </div>
    </div>
  </section>

  <section class="home-section">
    <div class="home-shell">
      <CTA
        title="Ready to scope your program?"
        description="Share sample scope, timelines, and regulatory context. We will return a scoped plan with clear next steps."
        primaryLabel="Request a quote"
        primaryHref="/contact"
        secondaryLabel="Review capabilities"
        secondaryHref="/capabilities"
      />
    </div>
  </section>
</Layout>

<style>
  .capability-card ul {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    list-style: none;
    padding: 0;
  }

  .capability-card li {
    background: rgba(255, 255, 255, 0.05);
    padding: 0.25rem 0.75rem;
    border-radius: 999px;
    font-size: 0.875rem;
  }

  @media (max-width: 768px) {
    .process-timeline {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .process-item,
    .process-item.process-left,
    .process-item.process-right {
      width: 100%;
      margin: 0;
      padding-left: 3rem;
      padding-right: 0;
      justify-content: flex-start;
      text-align: left;
    }

    .process-item .process-marker {
      left: 0;
      right: auto;
      transform: none;
    }
  }
</style>
