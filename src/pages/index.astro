---
import Layout from '../layouts/Layout.astro';
import CTA from '../components/CTA.astro';
import {
  siteData,
  capabilityHighlights,
  industries,
  processSteps,
  testimonials,
  faqs,
} from '../data/siteData';

const heroHighlights = [
  {
    title: 'ISO 17025 quality alignment',
    detail: 'Method controls and verification checkpoints built into every program.',
    icon: 'ri-shield-check-line',
  },
  {
    title: 'Compendial method coverage',
    detail: 'Validated USP and related methods for chemistry and microbiology workflows.',
    icon: 'ri-flask-line',
  },
  {
    title: 'End-to-end support',
    detail: 'From feasibility through launch with clear documentation and communication.',
    icon: 'ri-route-line',
  },
];

const capabilityAnchorMap: Record<string, string> = {
  'Operational Safety & Pathogen Screening': 'microbiology-programs',
  'Identity & Label Claim Verification': 'analytical-chemistry',
  'Data-Driven Shelf Life Studies': 'stability-testing',
  'Functional Performance Validation': 'method-development',
  'Strategic Quality Planning': 'method-development',
  'Concept-to-Market Commercialization': 'method-development',
};
---

<Layout title={`${siteData.name} - ${siteData.tagline}`} description={siteData.description}>
  <section class="home-hero">
    <div class="home-shell">
      
      <div class="hero-grid mb-16">
        <div class="hero-copy">
          <p class="hero-eyebrow">ISO/IEC 17025-aligned laboratory systems</p>
          <h1>Precision analytical testing for regulated product development.</h1>
          <p class="hero-lead">
            Based in the DFW metroplex, BioChroma provides chemistry, microbiology, and stability testing. We deliver the defensible data required to move cosmetics, supplements, and OTC products from R&D to market.
          </p>
          <div class="hero-cta-row mt-6">
            <a class="btn-primary" href="/contact">Request a quote <i class="ri-arrow-right-up-line"></i></a>
            <a class="btn-secondary" href="/capabilities">View capabilities <i class="ri-arrow-right-line"></i></a>
          </div>
        </div>

        <aside class="hero-media-frame" aria-label="Laboratory Facility">
          <img
            src="https://images.unsplash.com/photo-1581093450021-4a7360e9a6b5?w=800&q=80" 
            alt="BioChroma Analytical testing equipment"
            loading="eager"
          />
          [Image of a modern analytical laboratory featuring high-end chromatography equipment and scientists in PPE]
          <div class="hero-media-caption">
            <p>Analytical Excellence</p>
            <span>Compendial testing and custom method development.</span>
          </div>
        </aside>
      </div>
      
    </div>
  </section>

  <section class="home-section capabilities-section">
    <div class="home-shell">
      <div class="section-heading">
        <p>Capabilities</p>
        <h2>Six capability areas supporting quality from concept to scale.</h2>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mt-12">
        {capabilityHighlights.map((capability) => (
          <a href={`/capabilities#${capabilityAnchorMap[capability.title] ?? 'analytical-chemistry'}`} 
             class="group block bg-white/2 border border-white/5 p-8 rounded-xl flex flex-col transition-all duration-300 hover:-translate-y-1 hover:border-emerald-400/30 hover:bg-emerald-400/5 hover:shadow-[0_10px_30px_-10px_rgba(36,199,143,0.15)]">
            <div class="mb-4">
              <span class="inline-flex items-center justify-center w-12 h-12 rounded-lg bg-emerald-500/10 text-emerald-400 text-xl mb-4">
                <i class={capability.icon}></i>
              </span>
              <h3 class="text-xl font-bold text-white mb-2">{capability.title}</h3>
            </div>
            <p class="text-slate-300 text-sm leading-relaxed flex-grow">{capability.description}</p>
            
            <ul class="flex flex-wrap gap-2 my-6">
              {capability.bullets.map((bullet) => (
                <li class="bg-white/5 px-3 py-1.5 rounded-full text-xs font-medium text-emerald-400 border border-white/5">
                  {bullet}
                </li>
              ))}
            </ul>
            
            <div class="mt-auto flex items-center gap-2 text-sm font-semibold text-emerald-400 opacity-0 -translate-x-3 transition-all duration-300 group-hover:opacity-100 group-hover:translate-x-0">
              <span>Learn More</span>
              <i class="ri-arrow-right-line"></i>
            </div>
          </a>
        ))}
      </div>
    </div>
  </section>

  <section class="home-section support-section">
    <div class="home-shell support-layout">
      <div class="section-heading">
        <p>Who we support</p>
        <h2>Programs tuned to the teams that move regulated science forward.</h2>
      </div>
      <div class="support-pills">
        {industries.map((industry, index) => (
          <a href="/capabilities" class={`support-pill ${index % 2 === 0 ? 'support-pill-alt' : ''}`}>
            <span>{industry}</span>
            <i class="ri-arrow-right-up-line"></i>
          </a>
        ))}
      </div>
    </div>
  </section>

  <section class="home-section process-section">
    <div class="home-shell">
      <div class="section-heading section-heading-center">
        <p>Process</p>
        <h2>From discovery to launch with clear stage gates and transparent reporting.</h2>
      </div>
      
      [Image of a stage-gate project management diagram showing the transition from R&D feasibility to analytical testing and final market launch]

      <div class="process-timeline">
        {processSteps.map((step, index) => (
          <article class={`process-item ${index % 2 === 0 ? 'process-left' : 'process-right'}`}>
            <div class="process-marker" aria-hidden="true">
              <span>{index + 1}</span>
            </div>
            <div class="process-content">
              <h3>{step.title}</h3>
              <p>{step.description}</p>
            </div>
          </article>
        ))}
      </div>
    </div>
  </section>

  <section class="home-section testimonials-section">
    <div class="home-shell">
      <div class="section-heading">
        <p>Client feedback</p>
        <h2>Trusted by quality and regulatory leaders.</h2>
      </div>
      <div class="testimonial-row">
        {testimonials.map((item) => (
          <article class="testimonial-card">
            <p>“{item.content}”</p>
            <div class="mt-4 pt-4 border-t border-white/10">
              <h3 class="text-white font-semibold text-sm">{item.name}</h3>
              <span class="text-slate-400 text-xs uppercase tracking-wide">{item.role}</span>
            </div>
          </article>
        ))}
      </div>
    </div>
  </section>

  <section class="home-section faq-section">
    <div class="home-shell faq-layout">
      <div class="section-heading">
        <p>FAQ</p>
        <h2>Quick answers about BioChroma Analytical Labs.</h2>
      </div>

      <div class="faq-stack">
        {faqs.map((item) => (
          <details class="faq-item group">
            <summary class="hover:text-emerald-400 transition-colors">
              <span>{item.question}</span>
              <i class="ri-add-line group-open:rotate-45 transition-transform duration-300"></i>
            </summary>
            <p class="pt-4">{item.answer}</p>
          </details>
        ))}
      </div>
    </div>
  </section>

  <section class="home-section">
    <div class="home-shell">
      <CTA
        title="Ready to scope your program?"
        description="Share sample scope, timelines, and regulatory context. We will return a scoped plan with clear next steps."
        primaryLabel="Request a quote"
        primaryHref="/contact"
        secondaryLabel="Review capabilities"
        secondaryHref="/capabilities"
      />
    </div>
  </section>
</Layout>

<script>
  // Ensure only one FAQ is open at a time (matching the behavior from capabilities/quality)
  document.addEventListener('DOMContentLoaded', () => {
    const faqs = document.querySelectorAll('.faq-item');
    faqs.forEach((targetFaq) => {
      targetFaq.addEventListener('click', () => {
        faqs.forEach((faq) => {
          if (faq !== targetFaq) { faq.removeAttribute('open'); }
        });
      });
    });
  });
</script>